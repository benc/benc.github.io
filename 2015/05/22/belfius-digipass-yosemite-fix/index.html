<!DOCTYPE html>
<html lang="en-us">
	<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="Ben Cochez">
<meta name="description" content="Describe your website">
<meta name="generator" content="Hugo 0.36" />
<title>Get your Belfius DIGIPASS 870 working on Mac OS X Yosemite</title>
<link rel="shortcut icon" href="images/favicon.ico">
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/highlight.css">



<link rel="stylesheet" href="css/monosocialiconsfont.css">



<link href="/index.xml" rel="alternate" type="application/rss+xml" title="Ben Cochez" />


<meta property="og:title" content="Get your Belfius DIGIPASS 870 working on Mac OS X Yosemite" />
<meta property="og:description" content="
tl;dr You can get your new Belfius DIGIPASS working by following these instructions


Recently, my bank, Belfius, issued a DIGIPASS 870 smartcard reader (Dutch link) that also can process a Belgian eID card. I liked it:


I only have one device to use Belfius Direct Net and access eID protected sites.
I can enter my eID PIN code on the DIGIPASS, making the process more secure.


It worked great on Mavericks. Belfius made efforts to get it working on Mac OS X Yosemite, but sadly, it never worked properly on my main machine.

I decided to perform a complete reinstall, and it still didn&rsquo;t work properly. The DIGIPASS worked very well on other macs in my family, so I decided to figure some stuff out. This is what I found.

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2015/05/22/belfius-digipass-yosemite-fix/" />



<meta property="article:published_time" content="2015-05-22T10:56:16&#43;00:00"/>

<meta property="article:modified_time" content="2015-05-22T10:56:16&#43;00:00"/>













<meta itemprop="name" content="Get your Belfius DIGIPASS 870 working on Mac OS X Yosemite">
<meta itemprop="description" content="
tl;dr You can get your new Belfius DIGIPASS working by following these instructions


Recently, my bank, Belfius, issued a DIGIPASS 870 smartcard reader (Dutch link) that also can process a Belgian eID card. I liked it:


I only have one device to use Belfius Direct Net and access eID protected sites.
I can enter my eID PIN code on the DIGIPASS, making the process more secure.


It worked great on Mavericks. Belfius made efforts to get it working on Mac OS X Yosemite, but sadly, it never worked properly on my main machine.

I decided to perform a complete reinstall, and it still didn&rsquo;t work properly. The DIGIPASS worked very well on other macs in my family, so I decided to figure some stuff out. This is what I found.

">


<meta itemprop="datePublished" content="2015-05-22T10:56:16&#43;00:00" />
<meta itemprop="dateModified" content="2015-05-22T10:56:16&#43;00:00" />
<meta itemprop="wordCount" content="524">



<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Get your Belfius DIGIPASS 870 working on Mac OS X Yosemite"/>
<meta name="twitter:description" content="
tl;dr You can get your new Belfius DIGIPASS working by following these instructions


Recently, my bank, Belfius, issued a DIGIPASS 870 smartcard reader (Dutch link) that also can process a Belgian eID card. I liked it:


I only have one device to use Belfius Direct Net and access eID protected sites.
I can enter my eID PIN code on the DIGIPASS, making the process more secure.


It worked great on Mavericks. Belfius made efforts to get it working on Mac OS X Yosemite, but sadly, it never worked properly on my main machine.

I decided to perform a complete reinstall, and it still didn&rsquo;t work properly. The DIGIPASS worked very well on other macs in my family, so I decided to figure some stuff out. This is what I found.

"/>
<meta name="twitter:site" content="@https://www.twitter.com/bencochez"/>


    </head>
<body>
    <nav class="main-nav">
	
		<a href=''> <span class="arrow">←</span>Home</a>
	

	
 		<a href='/about/'>About</a>
  	

	
		<a class="cta" href="/index.xml">Subscribe</a>
	
</nav>

    <section id="wrapper">
        
        
<article class="post">
    <header>
        <h1>Get your Belfius DIGIPASS 870 working on Mac OS X Yosemite</h1>
        <h2 class="headline">
        May 22, 2015
        <br>
        
        </h2>
    </header>
    <section id="post-body">
        <blockquote>
<p>tl;dr You can get your new Belfius DIGIPASS working by following <a href="#fix">these instructions</a></p>
</blockquote>

<p>Recently, my bank, <a href="https://www.belfius.be/">Belfius</a>, issued a <a href="https://www.belfius.be/retail/nl/zelf-bankieren/diensten/kaartlezer/index.aspx?firstWA=no">DIGIPASS 870 smartcard reader (Dutch link)</a> that also can process a Belgian eID card. I liked it:</p>

<ul>
<li>I only have one device to use Belfius Direct Net and access eID protected sites.</li>
<li>I can enter my eID PIN code on the DIGIPASS, making the process more secure.</li>
</ul>

<p>It worked great on Mavericks. <a href="https://twitter.com/belfiuscontact/status/540120080450068481">Belfius made efforts to get it working on Mac OS X Yosemite</a>, but sadly, it never worked properly on my main machine.</p>

<p>I decided to perform a complete reinstall, and it still didn&rsquo;t work properly. The DIGIPASS worked very well on other macs in my family, so I decided to figure some stuff out. This is what I found.</p>

<p></p>

<h2 id="what-went-wrong">What went wrong?</h2>

<p>OS X ships with smartcard reader support out of the box:</p>

<ul>
<li>It uses the open source <a href="https://pcsclite.alioth.debian.org/ccid.html">CCID driver</a>. This driver supports many smartcard readers. It&rsquo;s located at <code>/usr/libexec/SmartCardServices/drivers/ifd-ccid.bundle/</code>.</li>
<li><a href="https://pcsclite.alioth.debian.org/ccid/shouldwork.html#0x1A440x0870">The DIGIPASS 870 works out of the box</a> with this CCID driver.</li>
</ul>

<p>To make the DIGIPASS actually work on OS X Yosemite, a small text entry has to be added to the configuration of this CCID driver, the <code>Info.plist</code> file inside the <code>ifd-ccid.bundle</code>. This is one of the things the Vasco DIGIPASS installer does.</p>

<p>However, this file is also being manipulated by <a href="http://eid.belgium.be/en/using_your_eid/installing_the_eid_software/">the eID installer issued by FedICT</a>.</p>

<p>Tampering with system files is dangerous, and this is exactly what went wrong:</p>

<ul>
<li>When you install the DIGIPASS 870 driver, it updates the CCID plist.</li>
<li>When you install the beID middleware, it <em>overwrites</em> the CCID plist with a custom one. It does contain an entry for the DIGIPASS 870, so it should still work from here on. However, if you would run the DIGIPASS 870 installer after the beID installer it corrupts the plist file, rendering both Belfius Direct Net and all eID applications useless.</li>
</ul>

<p>To make matters more complicated, Vasco lists a knowledge base article that fixes DIGIPASS 870 issues <a href="https://retail.vasco.com/install/faq/20140326_120189.aspx">on Mac OS X Mavericks</a>. I had it installed, and it worked well at the time. It actually makes things worse on Yosemite.</p>

<p><a name="fix"></a></p>

<h2 id="so-how-to-fix-it">So, how to fix it?</h2>

<p>Luckily, you can fix all these errors by restoring the CCID config file to a working state. Of course, since you will be tampering with system files, use these instructions at your own risk.</p>

<ul>
<li>Install the Belfius DIGIPASS 870 browser plugin. You get this file when you load Belfius Direct Net.</li>
<li>Install <a href="http://eid.belgium.be/en/using_your_eid/installing_the_eid_software/mac/">beID middleware</a>.</li>
<li>Open Finder, open the <code>Go</code>, <code>Go to folder...</code> menu and enter <code>/usr/libexec/SmartCardServices/drivers/ifd-ccid.bundle/Contents/</code>.</li>
<li>Rename the existing <code>Info.plist</code> file to <code>Info.plist.backup</code> (or something similar), in case you should need it later on.</li>
<li>I created <a href="https://gist.github.com/benc/438193275f9720f1b509">a gist</a> from the stock Yosemite Info.plist file, with the entry that the Vasco DIGIPASS 870 driver created. <a href="https://gist.github.com/benc/438193275f9720f1b509/download">Download it</a>, and place the Info.plist file inside the folder you just opened.</li>

<li><p>If you installed <a href="(https://retail.vasco.com/install/faq/20140326_120189.aspx)">the package from the Vasco KB article</a>, <em>revert</em> those changes. Open Terminal.app, and enter these commands:</p>

<pre><code>sudo rm -rf /Library/LaunchDaemons/org.opensc.pcscd.autostart.plist
sudo /Library/OpenSC/bin/sc-securityd.py active
</code></pre></li>

<li><p>And reboot.</p></li>
</ul>

<p>Test it:</p>

<ul>
<li>Go to [<a href="https://test.eid.belgium.be/](">https://test.eid.belgium.be/](</a>).</li>
<li>Open Keychain, and check if the BELPIC keychain appears when you insert your eID.</li>
</ul>

<p>That&rsquo;s it!</p>
    </section>
</article>

<footer id="post-meta" class="clearfix">
    <a href="https://twitter.com/bencochez">
    <img class="avatar" src="images/avatar.png">
    <div>
        <span class="dark">Ben Cochez</span>
        <span></span>
    </div>
    </a>
    <section id="sharing">
        <a class="twitter" href="https://twitter.com/intent/tweet?text=%2f2015%2f05%2f22%2fbelfius-digipass-yosemite-fix%2f - Get%20your%20Belfius%20DIGIPASS%20870%20working%20on%20Mac%20OS%20X%20Yosemite by @bencochez"><span class="icon-twitter"> tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

    </section>
</footer>

<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "heavyindustries" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<ul id="post-list" class="archive readmore">
    <h3>Read more</h3>

    
    
    
        <li>
            <a href="/2015/07/12/build_angular2_alpha_typescript_bindings/">Build up-to-date Typescript bindings for Angular 2 developer preview<aside class="dates">Jul 12 2015</aside></a>
        </li>
    
        <li>
            <a href="/2015/07/05/create_osx_vagrant_vmware_box/">Create an OS X vagrant box for VMWare Fusion<aside class="dates">Jul 5 2015</aside></a>
        </li>
    
        <li>
            <a href="/2015/06/18/dropbox-sync-photos-across-devices/">Use Dropbox to sync your photos across all of your devices<aside class="dates">Jun 18 2015</aside></a>
        </li>
    
        <li>
            <a href="/2015/06/02/configure-angular-html5-mode-in-undertow/">Configure Angular HTML 5 mode in Undertow<aside class="dates">Jun 3 2015</aside></a>
        </li>
    
        <li>
            <a href="/2015/05/26/colorize-maven-output-with-fish-shell/">Colorize maven output with fish shell<aside class="dates">May 26 2015</aside></a>
        </li>
    
</ul>



        <footer id="footer">
    
        <div id="social">

	
	
    
    <a class="symbol" href="https://www.github.com/benc">
        circlegithub
    </a>
    
    <a class="symbol" href="https://www.twitter.com/bencochez">
        circletwitterbird
    </a>
    


</div>

    
    <p class="small">
    
        © Copyright 2018 Ben Cochez
    
    </p>
</footer>

    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="js/main.js"></script>
<script src="js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-38982355-2', 'auto');
ga('send', 'pageview');
</script>


</body>
</html>
